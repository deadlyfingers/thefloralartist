(()=>{var U=Object.defineProperty,Z=Object.prototype.hasOwnProperty;var P=(e,r)=>()=>(r||(r={exports:{}},e(r.exports,r)),r.exports),X=e=>U(e,"__esModule",{value:!0});var Y=(e,r)=>{if(X(e),typeof r=="object"||typeof r=="function")for(let a in r)!Z.call(e,a)&&a!=="default"&&U(e,a,{get:()=>r[a],enumerable:!0});return e},ee=e=>e&&e.__esModule?e:Y(U({},"default",{value:e,enumerable:!0}),e);var j=P(I=>{"use strict";Object.defineProperty(I,"__esModule",{value:!0});var k=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","#","$","%","*","+",",","-",".",":",";","=","?","@","[","]","^","_","{","|","}","~"];I.decode83=function(e){for(var r=0,a=0;a<e.length;a++){var t=e[a],o=k.indexOf(t);r=r*83+o}return r};I.encode83=function(e,r){for(var a="",t=1;t<=r;t++){var o=Math.floor(e)/Math.pow(83,r-t)%83;a+=k[Math.floor(o)]}return a}});var D=P(R=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});R.sRGBToLinear=function(e){var r=e/255;return r<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4)};R.linearTosRGB=function(e){var r=Math.max(0,Math.min(1,e));return r<=.0031308?Math.round(r*12.92*255+.5):Math.round((1.055*Math.pow(r,1/2.4)-.055)*255+.5)};R.sign=function(e){return e<0?-1:1};R.signPow=function(e,r){return R.sign(e)*Math.pow(Math.abs(e),r)}});var G=P(E=>{"use strict";var re=E&&E.__extends||function(){var e=function(r,a){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var l in o)o.hasOwnProperty(l)&&(t[l]=o[l])},e(r,a)};return function(r,a){e(r,a);function t(){this.constructor=r}r.prototype=a===null?Object.create(a):(t.prototype=a.prototype,new t)}}();Object.defineProperty(E,"__esModule",{value:!0});var ae=function(e){re(r,e);function r(a){var t=e.call(this,a)||this;return t.name="ValidationError",t.message=a,t}return r}(Error);E.ValidationError=ae});var F=P(q=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0});var T=j(),_=D(),x=G(),z=function(e){if(!e||e.length<6)throw new x.ValidationError("The blurhash string must be at least 6 characters");var r=T.decode83(e[0]),a=Math.floor(r/9)+1,t=r%9+1;if(e.length!==4+2*t*a)throw new x.ValidationError("blurhash length mismatch: length is "+e.length+" but it should be "+(4+2*t*a))};q.isBlurhashValid=function(e){try{z(e)}catch(r){return{result:!1,errorReason:r.message}}return{result:!0}};var te=function(e){var r=e>>16,a=e>>8&255,t=e&255;return[_.sRGBToLinear(r),_.sRGBToLinear(a),_.sRGBToLinear(t)]},oe=function(e,r){var a=Math.floor(e/(19*19)),t=Math.floor(e/19)%19,o=e%19,l=[_.signPow((a-9)/9,2)*r,_.signPow((t-9)/9,2)*r,_.signPow((o-9)/9,2)*r];return l},ne=function(e,r,a,t){z(e),t=t|1;for(var o=T.decode83(e[0]),l=Math.floor(o/9)+1,v=o%9+1,m=T.decode83(e[1]),s=(m+1)/166,i=new Array(v*l),n=0;n<i.length;n++)if(n===0){var d=T.decode83(e.substring(2,6));i[n]=te(d)}else{var d=T.decode83(e.substring(4+n*2,6+n*2));i[n]=oe(d,s*t)}for(var h=r*4,M=new Uint8ClampedArray(h*a),u=0;u<a;u++)for(var c=0;c<r;c++){for(var B=0,f=0,b=0,g=0;g<l;g++)for(var n=0;n<v;n++){var p=Math.cos(Math.PI*c*n/r)*Math.cos(Math.PI*u*g/a),L=i[n+g*v];B+=L[0]*p,f+=L[1]*p,b+=L[2]*p}var O=_.linearTosRGB(B),K=_.linearTosRGB(f),Q=_.linearTosRGB(b);M[4*c+0+u*h]=O,M[4*c+1+u*h]=K,M[4*c+2+u*h]=Q,M[4*c+3+u*h]=255}return M};q.default=ne});var H=P(V=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0});var A=j(),y=D(),S=G(),C=4,se=function(e,r,a,t){for(var o=0,l=0,v=0,m=r*C,s=0;s<r;s++)for(var i=0;i<a;i++){var n=t(s,i);o+=n*y.sRGBToLinear(e[C*s+0+i*m]),l+=n*y.sRGBToLinear(e[C*s+1+i*m]),v+=n*y.sRGBToLinear(e[C*s+2+i*m])}var d=1/(r*a);return[o*d,l*d,v*d]},ie=function(e){var r=y.linearTosRGB(e[0]),a=y.linearTosRGB(e[1]),t=y.linearTosRGB(e[2]);return(r<<16)+(a<<8)+t},le=function(e,r){var a=Math.floor(Math.max(0,Math.min(18,Math.floor(y.signPow(e[0]/r,.5)*9+9.5)))),t=Math.floor(Math.max(0,Math.min(18,Math.floor(y.signPow(e[1]/r,.5)*9+9.5)))),o=Math.floor(Math.max(0,Math.min(18,Math.floor(y.signPow(e[2]/r,.5)*9+9.5))));return a*19*19+t*19+o},ce=function(e,r,a,t,o){if(t<1||t>9||o<1||o>9)throw new S.ValidationError("BlurHash must have between 1 and 9 components");if(r*a*4!==e.length)throw new S.ValidationError("Width and height must match the pixels array");for(var l=[],v=function(c){for(var B=function(b){var g=b==0&&c==0?1:2,p=se(e,r,a,function(L,O){return g*Math.cos(Math.PI*b*L/r)*Math.cos(Math.PI*c*O/a)});l.push(p)},f=0;f<t;f++)B(f)},m=0;m<o;m++)v(m);var s=l[0],i=l.slice(1),n="",d=t-1+(o-1)*9;n+=A.encode83(d,1);var h;if(i.length>0){var M=Math.max.apply(Math,i.map(function(c){return Math.max.apply(Math,c)})),u=Math.floor(Math.max(0,Math.min(82,Math.floor(M*166-.5))));h=(u+1)/166,n+=A.encode83(u,1)}else h=1,n+=A.encode83(0,1);return n+=A.encode83(ie(s),4),i.forEach(function(c){n+=A.encode83(le(c,h),2)}),n};V.default=ce});var N=P(w=>{"use strict";function de(e){for(var r in e)w.hasOwnProperty(r)||(w[r]=e[r])}Object.defineProperty(w,"__esModule",{value:!0});var W=F();w.decode=W.default;w.isBlurhashValid=W.isBlurhashValid;var ue=H();w.encode=ue.default;de(G())});const $=ee(N()),ve=document.createElement("canvas"),J=(e,r=32,a=32)=>{var t=ve;t.width=r,t.height=a;const o=t.getContext("2d"),l=$.decode(e,r,a,1),v=o.createImageData(r,a);if(v.data.set(l),o.putImageData(v,0,0),t.toDataURL())return t.toDataURL()};(function(e,r,a){const t=[];var o=null;function l(s,i=1e3){if(s.getAttribute("data-loaded"))return;var n=new Image,d=s.getAttribute("data-src");n.onload=()=>{s.setAttribute("data-loaded",!0);var h=()=>{s.parentElement.appendChild(n),setTimeout(()=>{s.onload=()=>{n.style.display="none"},s.src=d,t.length===0&&(clearInterval(o),o=null)},i)};t.push(h),o||(o=setInterval(()=>{if(t.length===0)return;t.pop().apply()},500))},n.src=d}function v(){const s=new IntersectionObserver((n,d)=>{for(entry of n)entry.isIntersecting&&!entry.target.getAttribute("data-loaded")&&entry.target.getAttribute("data-src")&&l(entry.target)},{threshold:.1}),i=document.querySelectorAll("img","#gallery");for(target of i)s.observe(target)}function m(s,i,n,d,h){var M=document.getElementById("gallery"),u=document.createElement("div");u.className="row";for(var c=0,B=s.length,f="",b="";c<B;){f=s[c],b=n[f];var g=document.createElement("a");g.href=i+f,g.setAttribute("data-fslightbox","gallery"),g.className="col-xs-12 col-sm-6 col-md-4 col-lg-3";var p=document.createElement("img");p.src=J(b,d,h),p.setAttribute("data-src",i+f),p.alt=f,g.appendChild(p),u.appendChild(g),c++}M.appendChild(u),v(),refreshFsLightbox()}fetch(`${e}`,{headers:{Accept:"application/json","Access-Control-Allow-Origin":a}}).then(function(s){if(s.status!==200){console.warn("Oops there was a problem. Status Code: "+s.status);return}s.json().then(function(i){m(i.images,r,i.hashmap,24,32)})}).catch(function(s){console.error("Fetch Error: ",s)})})(app.galleryURL,app.imgURL,app.storageAccessControlAllowOrigin);})();
