(()=>{var E=Object.defineProperty,Y=Object.prototype.hasOwnProperty;var g=(r,e)=>()=>(e||(e={exports:{}},r(e.exports,e)),e.exports),F=r=>E(r,"__esModule",{value:!0}),rr=(r,e)=>{F(r);for(var a in e)E(r,a,{get:e[a],enumerable:!0})},er=(r,e)=>{if(F(r),typeof e=="object"||typeof e=="function")for(let a in e)!Y.call(r,a)&&a!=="default"&&E(r,a,{get:()=>e[a],enumerable:!0});return r},ar=r=>r&&r.__esModule?r:er(E({},"default",{value:r,enumerable:!0}),r);var I=g(j=>{"use strict";Object.defineProperty(j,"__esModule",{value:!0});var z=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","#","$","%","*","+",",","-",".",":",";","=","?","@","[","]","^","_","{","|","}","~"];j.decode83=function(r){for(var e=0,a=0;a<r.length;a++){var t=r[a],o=z.indexOf(t);e=e*83+o}return e};j.encode83=function(r,e){for(var a="",t=1;t<=e;t++){var o=Math.floor(r)/Math.pow(83,e-t)%83;a+=z[Math.floor(o)]}return a}});var C=g(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0});_.sRGBToLinear=function(r){var e=r/255;return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)};_.linearTosRGB=function(r){var e=Math.max(0,Math.min(1,r));return e<=.0031308?Math.round(e*12.92*255+.5):Math.round((1.055*Math.pow(e,1/2.4)-.055)*255+.5)};_.sign=function(r){return r<0?-1:1};_.signPow=function(r,e){return _.sign(r)*Math.pow(Math.abs(r),e)}});var O=g(q=>{"use strict";var tr=q&&q.__extends||function(){var r=function(e,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var s in o)o.hasOwnProperty(s)&&(t[s]=o[s])},r(e,a)};return function(e,a){r(e,a);function t(){this.constructor=e}e.prototype=a===null?Object.create(a):(t.prototype=a.prototype,new t)}}();Object.defineProperty(q,"__esModule",{value:!0});var or=function(r){tr(e,r);function e(a){var t=r.call(this,a)||this;return t.name="ValidationError",t.message=a,t}return e}(Error);q.ValidationError=or});var H=g(U=>{"use strict";Object.defineProperty(U,"__esModule",{value:!0});var L=I(),M=C(),k=O(),x=function(r){if(!r||r.length<6)throw new k.ValidationError("The blurhash string must be at least 6 characters");var e=L.decode83(r[0]),a=Math.floor(e/9)+1,t=e%9+1;if(r.length!==4+2*t*a)throw new k.ValidationError("blurhash length mismatch: length is "+r.length+" but it should be "+(4+2*t*a))};U.isBlurhashValid=function(r){try{x(r)}catch(e){return{result:!1,errorReason:e.message}}return{result:!0}};var nr=function(r){var e=r>>16,a=r>>8&255,t=r&255;return[M.sRGBToLinear(e),M.sRGBToLinear(a),M.sRGBToLinear(t)]},sr=function(r,e){var a=Math.floor(r/(19*19)),t=Math.floor(r/19)%19,o=r%19,s=[M.signPow((a-9)/9,2)*e,M.signPow((t-9)/9,2)*e,M.signPow((o-9)/9,2)*e];return s},ir=function(r,e,a,t){x(r),t=t|1;for(var o=L.decode83(r[0]),s=Math.floor(o/9)+1,c=o%9+1,v=L.decode83(r[1]),d=(v+1)/166,i=new Array(c*s),n=0;n<i.length;n++)if(n===0){var f=L.decode83(r.substring(2,6));i[n]=nr(f)}else{var f=L.decode83(r.substring(4+n*2,6+n*2));i[n]=sr(f,d*t)}for(var h=e*4,p=new Uint8ClampedArray(h*a),l=0;l<a;l++)for(var u=0;u<e;u++){for(var y=0,B=0,w=0,P=0;P<s;P++)for(var n=0;n<c;n++){var T=Math.cos(Math.PI*u*n/e)*Math.cos(Math.PI*l*P/a),G=i[n+P*c];y+=G[0]*T,B+=G[1]*T,w+=G[2]*T}var D=M.linearTosRGB(y),Z=M.linearTosRGB(B),X=M.linearTosRGB(w);p[4*u+0+l*h]=D,p[4*u+1+l*h]=Z,p[4*u+2+l*h]=X,p[4*u+3+l*h]=255}return p};U.default=ir});var S=g(A=>{"use strict";Object.defineProperty(A,"__esModule",{value:!0});var b=I(),m=C(),W=O(),V=4,ur=function(r,e,a,t){for(var o=0,s=0,c=0,v=e*V,d=0;d<e;d++)for(var i=0;i<a;i++){var n=t(d,i);o+=n*m.sRGBToLinear(r[V*d+0+i*v]),s+=n*m.sRGBToLinear(r[V*d+1+i*v]),c+=n*m.sRGBToLinear(r[V*d+2+i*v])}var f=1/(e*a);return[o*f,s*f,c*f]},cr=function(r){var e=m.linearTosRGB(r[0]),a=m.linearTosRGB(r[1]),t=m.linearTosRGB(r[2]);return(e<<16)+(a<<8)+t},dr=function(r,e){var a=Math.floor(Math.max(0,Math.min(18,Math.floor(m.signPow(r[0]/e,.5)*9+9.5)))),t=Math.floor(Math.max(0,Math.min(18,Math.floor(m.signPow(r[1]/e,.5)*9+9.5)))),o=Math.floor(Math.max(0,Math.min(18,Math.floor(m.signPow(r[2]/e,.5)*9+9.5))));return a*19*19+t*19+o},lr=function(r,e,a,t,o){if(t<1||t>9||o<1||o>9)throw new W.ValidationError("BlurHash must have between 1 and 9 components");if(e*a*4!==r.length)throw new W.ValidationError("Width and height must match the pixels array");for(var s=[],c=function(u){for(var y=function(w){var P=w==0&&u==0?1:2,T=ur(r,e,a,function(G,D){return P*Math.cos(Math.PI*w*G/e)*Math.cos(Math.PI*u*D/a)});s.push(T)},B=0;B<t;B++)y(B)},v=0;v<o;v++)c(v);var d=s[0],i=s.slice(1),n="",f=t-1+(o-1)*9;n+=b.encode83(f,1);var h;if(i.length>0){var p=Math.max.apply(Math,i.map(function(u){return Math.max.apply(Math,u)})),l=Math.floor(Math.max(0,Math.min(82,Math.floor(p*166-.5))));h=(l+1)/166,n+=b.encode83(l,1)}else h=1,n+=b.encode83(0,1);return n+=b.encode83(cr(d),4),i.forEach(function(u){n+=b.encode83(dr(u,h),2)}),n};A.default=lr});var J=g(R=>{"use strict";function vr(r){for(var e in r)R.hasOwnProperty(e)||(R[e]=r[e])}Object.defineProperty(R,"__esModule",{value:!0});var $=H();R.decode=$.default;R.isBlurhashValid=$.isBlurhashValid;var fr=S();R.encode=fr.default;vr(O())});var Q=g(hr=>{rr(hr,{hashToImgDataUrl:()=>N});const K=ar(J()),Mr=document.createElement("canvas"),N=(r,e=32,a=32)=>{var t=Mr;t.width=e,t.height=a;const o=t.getContext("2d"),s=K.decode(r,e,a,1),c=o.createImageData(e,a);if(c.data.set(s),o.putImageData(c,0,0),t.toDataURL())return t.toDataURL()}});Q();})();
